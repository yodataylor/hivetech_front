{"ast":null,"code":"import initialState from \"../store/initialState\";\nimport * as Actions from \"./actions\";\nexport const CartsReducer = function () {\n  let state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState.carts;\n  let action = arguments.length > 1 ? arguments[1] : undefined;\n  switch (action.type) {\n    case Actions.FETCH_CARTS:\n      return {\n        ...state,\n        results: action.payload.carts,\n        totalPrice: getTotalCartPrice(action.payload.carts),\n        totalCart: action.payload.carts.length,\n        totalCartItems: getTotalCartItems(action.payload.carts)\n      };\n    case Actions.ADD_CART:\n      const newAddedCarts = [...state.results, action.payload.cart];\n      return {\n        ...state,\n        results: newAddedCarts,\n        totalPrice: getTotalCartPrice(newAddedCarts),\n        totalCart: newAddedCarts.length,\n        totalCartItems: getTotalCartItems(newAddedCarts)\n      };\n    case Actions.UPDATE_CART:\n      const prevCarts = state.results;\n      const newUpdatedCarts = prevCarts.map(cart => {\n        if (cart.id === action.payload.cart.id) {\n          cart.quantity = action.payload.cart.quantity;\n          cart.total_price = action.payload.cart.quantity * cart.product.price;\n        }\n        return cart;\n      });\n      return {\n        ...state,\n        results: newUpdatedCarts,\n        totalPrice: getTotalCartPrice(newUpdatedCarts),\n        totalCart: newUpdatedCarts.length,\n        totalCartItems: getTotalCartItems(newUpdatedCarts)\n      };\n    case Actions.REMOVE_CART:\n      const newRemovedCarts = state.results.filter(cart => cart.id !== action.payload.cartId);\n      return {\n        ...state,\n        results: newRemovedCarts,\n        totalPrice: getTotalCartPrice(newRemovedCarts),\n        totalCart: newRemovedCarts.length,\n        totalCartItems: getTotalCartItems(newRemovedCarts)\n      };\n    case Actions.CLEAR_CARTS:\n      return {\n        ...state,\n        results: [],\n        totalPrice: 0,\n        totalCart: 0,\n        totalCartItems: 0\n      };\n    default:\n      return state;\n  }\n};\n_c = CartsReducer;\nconst getTotalCartPrice = carts => {\n  if (carts.length > 0) {\n    const totalPrice = carts.reduce((prev, cur) => prev + cur.total_price, 0);\n    return +totalPrice.toFixed(2);\n  }\n  return 0;\n};\nconst getTotalCartItems = carts => {\n  if (carts.length > 0) {\n    const totalCartItems = carts.reduce((prev, cur) => prev + cur.quantity, 0);\n    return totalCartItems;\n  }\n  return 0;\n};\nvar _c;\n$RefreshReg$(_c, \"CartsReducer\");","map":{"version":3,"names":["initialState","Actions","CartsReducer","state","carts","action","type","FETCH_CARTS","results","payload","totalPrice","getTotalCartPrice","totalCart","length","totalCartItems","getTotalCartItems","ADD_CART","newAddedCarts","cart","UPDATE_CART","prevCarts","newUpdatedCarts","map","id","quantity","total_price","product","price","REMOVE_CART","newRemovedCarts","filter","cartId","CLEAR_CARTS","reduce","prev","cur","toFixed"],"sources":["C:/Users/brian/Desktop/frontend/src/reducks/cart/reducers.js"],"sourcesContent":["import initialState from \"../store/initialState\";\nimport * as Actions from \"./actions\";\n\nexport const CartsReducer = (state = initialState.carts, action) => {\n\tswitch (action.type) {\n\t\tcase Actions.FETCH_CARTS:\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tresults: action.payload.carts,\n\t\t\t\ttotalPrice: getTotalCartPrice(action.payload.carts),\n\t\t\t\ttotalCart: action.payload.carts.length,\n\t\t\t\ttotalCartItems: getTotalCartItems(action.payload.carts),\n\t\t\t};\n\n\t\tcase Actions.ADD_CART:\n\t\t\tconst newAddedCarts = [...state.results, action.payload.cart];\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tresults: newAddedCarts,\n\t\t\t\ttotalPrice: getTotalCartPrice(newAddedCarts),\n\t\t\t\ttotalCart: newAddedCarts.length,\n\t\t\t\ttotalCartItems: getTotalCartItems(newAddedCarts),\n\t\t\t};\n\n\t\tcase Actions.UPDATE_CART:\n\t\t\tconst prevCarts = state.results;\n\t\t\tconst newUpdatedCarts = prevCarts.map((cart) => {\n\t\t\t\tif (cart.id === action.payload.cart.id) {\n\t\t\t\t\tcart.quantity = action.payload.cart.quantity;\n\t\t\t\t\tcart.total_price = action.payload.cart.quantity * cart.product.price;\n\t\t\t\t}\n\t\t\t\treturn cart;\n\t\t\t});\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tresults: newUpdatedCarts,\n\t\t\t\ttotalPrice: getTotalCartPrice(newUpdatedCarts),\n\t\t\t\ttotalCart: newUpdatedCarts.length,\n\t\t\t\ttotalCartItems: getTotalCartItems(newUpdatedCarts),\n\t\t\t};\n\t\tcase Actions.REMOVE_CART:\n\t\t\tconst newRemovedCarts = state.results.filter((cart) => cart.id !== action.payload.cartId);\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tresults: newRemovedCarts,\n\t\t\t\ttotalPrice: getTotalCartPrice(newRemovedCarts),\n\t\t\t\ttotalCart: newRemovedCarts.length,\n\t\t\t\ttotalCartItems: getTotalCartItems(newRemovedCarts),\n\t\t\t};\n\t\tcase Actions.CLEAR_CARTS:\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tresults: [],\n\t\t\t\ttotalPrice: 0,\n\t\t\t\ttotalCart: 0,\n\t\t\t\ttotalCartItems: 0,\n\t\t\t};\n\t\tdefault:\n\t\t\treturn state;\n\t}\n};\n\nconst getTotalCartPrice = (carts) => {\n\tif (carts.length > 0) {\n\t\tconst totalPrice = carts.reduce((prev, cur) => prev + cur.total_price, 0);\n\t\treturn +totalPrice.toFixed(2);\n\t}\n\treturn 0;\n};\n\nconst getTotalCartItems = (carts) => {\n\tif (carts.length > 0) {\n\t\tconst totalCartItems = carts.reduce((prev, cur) => prev + cur.quantity, 0);\n\t\treturn totalCartItems;\n\t}\n\treturn 0;\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}