{"ast":null,"code":"import axios from \"axios\";\nrequire('dotenv').config();\nexport const LOGIN_USER_KEY = \"HIVE_TECHWEAR_LOGIN_USER_KEY\";\nconst {\n  REACT_APP_ENVIRONMENT,\n  REACT_APP_API_BASE_URL_PROD,\n  REACT_APP_API_BASE_URL_DEV\n} = process.env;\nlet baseURL;\n\n// if (REACT_APP_ENVIRONMENT === \"PRODUCTION\") {\n// \tbaseURL = REACT_APP_API_BASE_URL_PROD;\n// } else {\n// \tbaseURL = REACT_APP_API_BASE_URL_DEV;\n// }\n// baseURL = \"https://backend-hivetech-wear.herokuapp.com/\";\n\nbaseURL = \"http://127.0.0.1:8000/\";\nconst api = axios.create({\n  baseURL: baseURL,\n  headers: {\n    \"Content-Type\": \"application/json\"\n  }\n});\napi.interceptors.request.use(config => {\n  if (config.requireToken) {\n    const user = localStorage.getItem(LOGIN_USER_KEY) ? JSON.parse(localStorage.getItem(LOGIN_USER_KEY)) : null;\n    config.headers.common[\"Authorization\"] = user.token;\n  }\n  return config;\n}, err => console.error(err));\napi.interceptors.response.use(response => {\n  return response.data;\n}, error => {\n  console.log(\"error.response\", error);\n  if (error.response.status === 401) {\n    localStorage.removeItem(LOGIN_USER_KEY);\n  }\n  return Promise.reject(error);\n});\nexport default class API {\n  constructor() {\n    this.signUp = async signUpBody => {\n      const formData = new FormData();\n      for (const key in signUpBody) {\n        formData.append(key, signUpBody[key]);\n      }\n      return api.post(\"/users/signup/\", formData);\n    };\n    this.signIn = async signInBody => {\n      const formData = new FormData();\n      for (const key in signInBody) {\n        formData.append(key, signInBody[key]);\n      }\n      return api.post(\"/users/signin/\", formData);\n    };\n    this.getCategories = () => {\n      return api.get(\"/categories/\");\n    };\n    this.getProducts = function () {\n      let query = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      return api.get(\"/products/\", {\n        params: query,\n        requireToken: true\n      });\n    };\n    this.getCarts = function () {\n      let query = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      return api.get(\"/carts/\", {\n        params: query,\n        requireToken: true\n      });\n    };\n    this.addCart = addCartBody => {\n      const formData = new FormData();\n      for (const key in addCartBody) {\n        formData.append(key, addCartBody[key]);\n      }\n      return api.post(\"/carts/add/\", formData, {\n        requireToken: true\n      });\n    };\n    this.updateCart = (updateCartBody, cartId) => {\n      const formData = new FormData();\n      for (const key in updateCartBody) {\n        formData.append(key, updateCartBody[key]);\n      }\n      return api.put(`/carts/update/${cartId}/`, formData, {\n        requireToken: true\n      });\n    };\n    this.checkoutOrder = checkoutOrderBody => {\n      return api.post(\"/orders/add/\", checkoutOrderBody, {\n        requireToken: true\n      });\n    };\n  }\n}","map":{"version":3,"names":["axios","require","config","LOGIN_USER_KEY","REACT_APP_ENVIRONMENT","REACT_APP_API_BASE_URL_PROD","REACT_APP_API_BASE_URL_DEV","process","env","baseURL","api","create","headers","interceptors","request","use","requireToken","user","localStorage","getItem","JSON","parse","common","token","err","console","error","response","data","log","status","removeItem","Promise","reject","API","signUp","signUpBody","formData","FormData","key","append","post","signIn","signInBody","getCategories","get","getProducts","query","params","getCarts","addCart","addCartBody","updateCart","updateCartBody","cartId","put","checkoutOrder","checkoutOrderBody"],"sources":["/Users/techi.s./Desktop/HiveTechWear/frontend/src/API.js"],"sourcesContent":["import axios from \"axios\";\nrequire('dotenv').config()\n\nexport const LOGIN_USER_KEY = \"HIVE_TECHWEAR_LOGIN_USER_KEY\";\nconst { REACT_APP_ENVIRONMENT, REACT_APP_API_BASE_URL_PROD, REACT_APP_API_BASE_URL_DEV } = process.env;\nlet baseURL;\n\n// if (REACT_APP_ENVIRONMENT === \"PRODUCTION\") {\n// \tbaseURL = REACT_APP_API_BASE_URL_PROD;\n// } else {\n// \tbaseURL = REACT_APP_API_BASE_URL_DEV;\n// }\n// baseURL = \"https://backend-hivetech-wear.herokuapp.com/\";\n\nbaseURL = \"http://127.0.0.1:8000/\";\nconst api = axios.create({\n  baseURL: baseURL,\n  headers: {\n    \"Content-Type\": \"application/json\",\n  },\n});\n\napi.interceptors.request.use(\n  (config) => {\n    if (config.requireToken) {\n      const user = localStorage.getItem(LOGIN_USER_KEY)\n        ? JSON.parse(localStorage.getItem(LOGIN_USER_KEY))\n        : null;\n      config.headers.common[\"Authorization\"] = user.token;\n    }\n\n    return config;\n  },\n  (err) => console.error(err)\n);\n\napi.interceptors.response.use(\n  (response) => {\n    return response.data;\n  },\n  (error) => {\n    console.log(\"error.response\", error);\n    if (error.response.status === 401) {\n      localStorage.removeItem(LOGIN_USER_KEY);\n    }\n\n    return Promise.reject(error);\n  }\n);\n\nexport default class API {\n  signUp = async (signUpBody) => {\n    const formData = new FormData();\n\n    for (const key in signUpBody) {\n      formData.append(key, signUpBody[key]);\n    }\n\n    return api.post(\"/users/signup/\", formData);\n  };\n\n  signIn = async (signInBody) => {\n    const formData = new FormData();\n    for (const key in signInBody) {\n      formData.append(key, signInBody[key]);\n    }\n    return api.post(\"/users/signin/\", formData);\n  };\n\n  // Category\n  getCategories = () => {\n    return api.get(\"/categories/\");\n  };\n\n  // Product\n  getProducts = (query = {}) => {\n    return api.get(\"/products/\", { params: query, requireToken: true });\n  };\n\n  // Cart\n  getCarts = (query = {}) => {\n    return api.get(\"/carts/\", { params: query, requireToken: true });\n  };\n\n  addCart = (addCartBody) => {\n    const formData = new FormData();\n    for (const key in addCartBody) {\n      formData.append(key, addCartBody[key]);\n    }\n    return api.post(\"/carts/add/\", formData, { requireToken: true });\n  };\n\n  updateCart = (updateCartBody, cartId) => {\n    const formData = new FormData();\n    for (const key in updateCartBody) {\n      formData.append(key, updateCartBody[key]);\n    }\n    return api.put(`/carts/update/${cartId}/`, formData, {\n      requireToken: true,\n    });\n  };\n\n  // Checkout\n  checkoutOrder = (checkoutOrderBody) => {\n    return api.post(\"/orders/add/\", checkoutOrderBody, { requireToken: true });\n  };\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}